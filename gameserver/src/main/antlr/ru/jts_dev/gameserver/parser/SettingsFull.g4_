grammar SettingsFull;

import CommonGrammar;

file
	: initial_equipment initial_custom_equipment initial_start_point
	restart_point
	minimum_stat maximum_stat recommended_stat
	olympiad_arena olympiad_general_setting
	hero_general_setting
	pvpmatch_setting
	cleft_setting
	EOF
	;

initial_equipment
	:
	'initial_equipment_begin'
	human_fighter '=' array
	human_magician '=' array
	elf_fighter '=' array
	elf_magician '=' array
	darkelf_fighter '=' array
	darkelf_magician '=' array
	orc_fighter '=' array
	orc_shaman '=' array
	dwarf_apprentice '=' array
	kamael_m_soldier '=' array
	kamael_f_soldier '=' array
	'initial_equipment_end'
	;

initial_custom_equipment
    :
    'initial_custom_equipment_begin'
    human_fighter '=' array
    human_magician '=' array
    elf_fighter '=' array
    elf_magician '=' array
    darkelf_fighter '=' array
    darkelf_magician '=' array
    orc_fighter '=' array
    orc_shaman '=' array
    dwarf_apprentice '=' array
    kamael_m_soldier '=' array
    kamael_f_soldier '=' array
    'initial_custom_equipment_end'
    ;

restart_point
    :
    'restart_point_begin'
    area+
    rpoint+
    'restart_point_end'
    ;

area
    :
    'area_begin'
    range
    race+
    'area_end'
    ;

range
    : 'range' '=' array
    ;

race
    :
    'race' '=' race_array
    ;

race_array
    : EMPTY_ARRAY | '{' char_race ';' NAME '}'
    ;

rpoint
    :
    'point_begin'
    rppoint_name
    rppoint+
    rpchao_point+
    rpmap+
    banned_race
    bbs
    loc_name
    'point_end'
    ;

bbs : 'bbs' '=' DECIMAL_LITERAL;

loc_name
    : 'loc_name' '=' DECIMAL_LITERAL
    ;

rppoint_name
    : 'point_name' '=' NAME
    ;

rppoint
    : 'point' '=' array
    ;

rpchao_point
    : 'chao_point' '=' array
    ;

rpmap
    : 'map' '=' array
    ;

banned_race
    : 'banned_race' '=' race_array
    ;

initial_start_point
    :
    'initial_start_point_begin'
    points+
    'initial_start_point_end'
    ;

points
    :
    'point_begin'
    point+
    'class' '=' classes_array
    'point_end'
    ;

point
    :
    'point' '=' array
    ;

classes_array
    : '{' (char_class ';') * char_class '}'
    ;

char_class
    : human_fighter | human_magician | elf_fighter | elf_magician | darkelf_fighter | darkelf_magician
    | orc_fighter | orc_shaman | dwarf_apprentice | kamael_m_soldier | kamael_f_soldier
    ;

char_race
    : human | darkelf | orc | dwarf | elf | kamael
    ;

minimum_stat
    :
    'minimum_stat_begin'
    human_fighter '=' array
    human_magician '=' array
    elf_fighter '=' array
    elf_magician '=' array
    darkelf_fighter '=' array
    darkelf_magician '=' array
    orc_fighter '=' array
    orc_shaman '=' array
    dwarf_apprentice '=' array
    kamael_m_soldier '=' array
    kamael_f_soldier '=' array
    'minimum_stat_end'
    ;

maximum_stat
    :
    'maximum_stat_begin'
    human_fighter '=' array
    human_magician '=' array
    elf_fighter '=' array
    elf_magician '=' array
    darkelf_fighter '=' array
    darkelf_magician '=' array
    orc_fighter '=' array
    orc_shaman '=' array
    dwarf_apprentice '=' array
    kamael_m_soldier '=' array
    kamael_f_soldier '=' array
    'maximum_stat_end'
    ;

recommended_stat
    :
    'recommended_stat_begin'
    human_fighter '=' array
    human_magician '=' array
    elf_fighter '=' array
    elf_magician '=' array
    darkelf_fighter '=' array
    darkelf_magician '=' array
    orc_fighter '=' array
    orc_shaman '=' array
    dwarf_apprentice '=' array
    kamael_m_soldier '=' array
    kamael_f_soldier '=' array
    'recommended_stat_end'
    ;

olympiad_arena
    :
    'olympiad_arena_begin'
    arena+
    'olympiad_arena_end'
    ;

arena
    :
    'arena_begin'
    id
    range
    point1
    point2
    olympiad_door
    'arena_end'
    ;

point1 : 'point1' '=' array;
point2 : 'point2' '=' array;
olympiad_door : 'olympiad_door' '=' array;

olympiad_general_setting
    :
    'olympiad_general_setting_begin'
    forbidden_weapon
    classless_bonus
    class_bonus
    team_bonus
    give_skill_class
    give_skill_classless
    give_skill_team
    olympiad_time_setting
    olympiad_point_denominator
    olympiad_point_weight
    olympiad_reset_skill
    olympiad_reset_skill_excluded
    'olympiad_general_setting_end'
    ;

forbidden_weapon : 'forbidden_weapon' '=' array;
classless_bonus : 'classless_bonus' '=' array;
class_bonus : 'class_bonus' '=' array;
team_bonus : 'team_bonus' '=' array;

give_skill_class : 'give_skill_class' '=' '{' (third_class '=' EMPTY_ARRAY)+ '}' ;
give_skill_classless : 'give_skill_classless' '=' '{' (third_class '=' EMPTY_ARRAY)+ '}' ;
give_skill_team : 'give_skill_team' '=' '{' (third_class '=' EMPTY_ARRAY)+ '}' ;

olympiad_time_setting : 'olympiad_time_setting' '=' HOUR_MIN_OBJECT;
olympiad_point_denominator : 'olympiad_point_denominator' '=' array;
olympiad_point_weight : 'olympiad_point_weight' '=' array;

olympiad_reset_skill : 'olympiad_reset_skill' '=' DECIMAL_LITERAL;
olympiad_reset_skill_excluded : 'olympiad_reset_skill_excluded' '=' array;

hero_general_setting
    :
    'hero_general_setting_start'
    hero_skill
    'hero_general_setting_end'
    ;

hero_skill : 'hero_skill' '=' array;

pvpmatch_setting
    :
    'pvpmatch_setting_start'
    give_pvppoint_time
    'pvpmatch_setting_end'
    ;

give_pvppoint_time
    :
    'give_pvppoint_time_start'
    give_pvppoint_start_time
    give_pvppoint_end_time
    give_pvppoint_week_days
    'give_pvppoint_time_end'
    ;

give_pvppoint_start_time : 'give_pvppoint_start_time' '=' HOUR_MIN_OBJECT;
give_pvppoint_end_time : 'give_pvppoint_end_time' '=' HOUR_MIN_OBJECT;
give_pvppoint_week_days : 'give_pvppoint_week_days' '=' array;

cleft_setting
    :
    'cleft_setting_begin'
    cleft_zone_territory
    red_start_point
    blue_start_point
    red_banish_point
    blue_banish_point
    cat_period
    winner_reward
    loser_reward
    winner_sp_bonus
    loser_sp_bonus
    kill_sp_bonus
    waiting_skill
    'cleft_setting_end'
    ;

cat_period : 'CAT_period' '=' DECIMAL_LITERAL;

winner_reward: 'winner_reward' '=' array;
loser_reward: 'loser_reward' '=' array;

winner_sp_bonus : 'winner_sp_bonus' '=' DECIMAL_LITERAL;
loser_sp_bonus : 'loser_sp_bonus' '=' DECIMAL_LITERAL;
kill_sp_bonus : 'kill_sp_bonus' '=' DECIMAL_LITERAL;
waiting_skill : 'waiting_skill' '=' '{' NAME '}';

cleft_zone_territory : 'cleft_zone_territory' '=' array;

red_start_point
    :
    'red_start_point_begin'
    cspoint+
    'red_start_point_end'
    ;

blue_start_point
    :
    'blue_start_point_begin'
    cspoint+
    'blue_start_point_end'
    ;

red_banish_point
    :
    'red_banish_point_begin'
    cspoint+
    'red_banish_point_end'
    ;

blue_banish_point
    :
    'blue_banish_point_begin'
    cspoint+
    'blue_banish_point_end'
    ;

cspoint : 'point' '=' array;

human : 'human';
darkelf : 'darkelf';
orc : 'orc';
dwarf : 'dwarf';
elf : 'elf';
kamael : 'kamael';

human_fighter : 'human_fighter';
human_magician : 'human_magician';
elf_fighter : 'elf_fighter';
elf_magician : 'elf_magician';
darkelf_fighter : 'darkelf_fighter';
darkelf_magician : 'darkelf_magician';
orc_fighter : 'orc_fighter';
orc_shaman : 'orc_shaman';
dwarf_apprentice : 'dwarf_apprentice';
kamael_m_soldier : 'kamael_m_soldier';
kamael_f_soldier : 'kamael_f_soldier';

duelist: 'duelist' ;
dreadnought : 'dreadnought';
phoenix_knight : 'phoenix_knight';
hell_knight : 'hell_knight';
sagittarius : 'sagittarius';
adventurer : 'adventurer';
archmage : 'archmage';
soultaker : 'soultaker';
arcana_lord : 'arcana_lord';
cardinal : 'cardinal';
hierophant : 'hierophant';
evas_templar : 'evas_templar';
sword_muse : 'sword_muse';
wind_rider : 'wind_rider';
moonlight_sentinel : 'moonlight_sentinel';
mystic_muse : 'mystic_muse';
elemental_master : 'elemental_master';
evas_saint : 'evas_saint';
shilien_templar : 'shilien_templar';
spectral_dancer : 'spectral_dancer';
ghost_hunter : 'ghost_hunter' ;
ghost_sentinel : 'ghost_sentinel';
storm_screamer : 'storm_screamer';
spectral_master : 'spectral_master';
shilien_saint : 'shilien_saint';
titan : 'titan';
grand_khavatari : 'grand_khavatari';
dominator : 'dominator';
doomcryer : 'doomcryer';
fortune_seeker : 'fortune_seeker';
maestro : 'maestro';
doombringer : 'doombringer';
m_soul_hound : 'm_soul_hound';
f_soul_hound : 'f_soul_hound';
trickster : 'trickster';

third_class
    : duelist | dreadnought | phoenix_knight | hell_knight | sagittarius | adventurer | archmage | soultaker
    | arcana_lord | cardinal | hierophant | evas_templar | sword_muse | wind_rider | moonlight_sentinel | mystic_muse
    | elemental_master | evas_saint | shilien_templar | spectral_dancer | ghost_hunter | ghost_sentinel |storm_screamer
    | spectral_master | shilien_saint | titan | grand_khavatari | dominator | doomcryer | fortune_seeker | maestro
    | doombringer | m_soul_hound | f_soul_hound | trickster
    ;
